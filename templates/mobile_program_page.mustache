{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template block_myprograms/mobile_program_page

    The main page to view the program details

    Classes required for JS:
    * None

    Data attibutes required for JS:
    * All data attributes are required

    Context variables required for this template:
    * All data attributes are required

    Example context (json):
    {
        "program": {
            "id":"1",
            "contextid":"1",
            "fullname":"Program Test",
            "idnumber":"1234",
            "description":"<p dir="\&quot;ltr\&quot;" style="\&quot;text-align:left;\&quot;">This is a description&lt;\/p&gt;",
            "descriptionformat":"1",
            "status":{"color":"success","text":"Completed"},"image":"",
            "progress":100,
            "image":""
        },
        "allocation": {
            "id":"1",
            "timeallocateddate":"Thursday, 28 July 2022, 6:35 PM",
            "timestartdate":"Thursday, 28 July 2022, 6:35 PM",
            "timeduedatedate":"Friday, 29 July 2022, 5:07 PM",
            "timeenddatedate":"Friday, 29 July 2022, 5:07 PM",
            "timecompleteddate":"Friday, 29 July 2022, 5:07 PM"
        },
        "programcontent": [{
            "type":"set",
            "fullname":"Program Test",
            "completiontype":"All in any order",
            "padding":""
        },{
            "type":"course",
            "course":{
                "coursecategory":"Default tenant",
                "courseimage":false,
                "enddate":"1690088400",
                "fullname":"Course 1",
                "fullnamedisplay":"Course 2",
                "hasprogress":true,
                "hidden":false,
                "id":"2",
                "idnumber":"",
                "isfavourite":false,
                "progress":100,
                "shortname":"course1",
                "showactivitydates":"1",
                "showcompletionconditions":"1",
                "showshortname":false,
                "startdate":"1658552400",
                "summary":"",
                "summaryformat":"1",
                "timeaccess":"1662654673",
                "viewurl":{},
                "visible":"1",
                "completionusertracked":true
            }
        }]
    }
}}
{{=<% %>=}}
<div class="safe-area-padding programbox" [id]="CONTENT_OTHERDATA.program.id">
    <ion-grid class="ion-no-padding core-no-grid list-item-limited-width md hydrated" *ngIf="CONTENT_OTHERDATA.program != null">
        <ion-row class="ion-no-padding">
            <ion-col class="ion-no-padding" size="12" size-sm="6" size-md="6" size-lg="4" size-xl="3">
                <h3>
                    <ion-icon *ngIf="!CONTENT_OTHERDATA.program.image" name="fas-cubes" slot="start" aria-hidden="true" class="ion-margin-end"></ion-icon>
                    <ion-avatar *ngIf="CONTENT_OTHERDATA.program.image" slot="start" class="core-course-thumb ion-margin-end">
                        <img [src]="CONTENT_OTHERDATA.program.image" core-external-content alt="" />
                    </ion-avatar>
                    <span>{{ CONTENT_OTHERDATA.program.fullname }}</span>
                </h3>
            </ion-col>
        </ion-row>
        <ion-row class="ion-no-padding ion-margin-bottom border-bottom" *ngIf="CONTENT_OTHERDATA.program.status">
            <ion-col class="ion-no-padding" size="12" size-sm="6" size-md="6" size-lg="4" size-xl="3">
                <ion-chip [color]="CONTENT_OTHERDATA.program.status.color" 
                    class="ion-text-nowrap">
                    <span class="sr-only">CONTENT_OTHERDATA.program.status.text</span>
                    <ion-label>
                        <core-format-text [text]="CONTENT_OTHERDATA.program.status.text" [contextInstanceId]="CONTENT_OTHERDATA.program.contextid">
                        </core-format-text>
                    </ion-label>
                </ion-chip>
            </ion-col>
        </ion-row>
        <ion-row class="ion-no-padding border-bottom" *ngIf="CONTENT_OTHERDATA.program.descriptiondisplay">
            <ion-col class="ion-no-padding" size="12" size-sm="6" size-md="6" size-lg="4" size-xl="3">
                <div class="summary">
                    <core-format-text [text]="CONTENT_OTHERDATA.program.descriptiondisplay"></core-format-text>
                </div>
            </ion-col>
        </ion-row>
        <ion-row class="ion-padding-bottom ion-margin-bottom program-dates border-bottom">
            <ion-col class="ion-no-padding" size="12" size-sm="6" size-md="6" size-lg="4" size-xl="3">
                <ion-label position="stacked"><b>{{ 'plugin.block_myprograms.allocationdate' | translate }}</b></ion-label>
                <core-format-text [text]="CONTENT_OTHERDATA.allocation.timeallocateddate"></core-format-text>
                <ng-container *ngIf="CONTENT_OTHERDATA.allocation.timestartdate">
                    <ion-label position="stacked"><b>{{ 'plugin.block_myprograms.programstart' | translate }}</b></ion-label>
                    <core-format-text [text]="CONTENT_OTHERDATA.allocation.timestartdate"></core-format-text>
                </ng-container>
                <ng-container *ngIf="CONTENT_OTHERDATA.allocation.timeduedatedate">
                    <ion-label position="stacked"><b>{{ 'plugin.block_myprograms.programdue' | translate }}</b></ion-label>
                    <core-format-text [text]="CONTENT_OTHERDATA.allocation.timeduedatedate"></core-format-text>
                </ng-container>
                <ng-container *ngIf="CONTENT_OTHERDATA.allocation.timeenddatedate">
                    <ion-label position="stacked"><b>{{ 'plugin.block_myprograms.programend' | translate }}</b></ion-label>
                    <core-format-text [text]="CONTENT_OTHERDATA.allocation.timeenddatedate"></core-format-text>
                </ng-container>
                <ng-container *ngIf="CONTENT_OTHERDATA.allocation.timecompleteddate">
                    <ion-label position="stacked"><b>{{ 'plugin.block_myprograms.completiondate' | translate }}</b></ion-label>
                    <core-format-text [text]="CONTENT_OTHERDATA.allocation.timecompleteddate"></core-format-text>
                </ng-container>
            </ion-col>
        </ion-row>
        <ion-row class="ion-no-padding">
            <ion-col class="ion-no-padding" size="auto">
                <h3>{{ 'plugin.block_myprograms.content' | translate }}</h3>
            </ion-col>
        </ion-row>
        <ion-row class="ion-no-padding program-content">
            <ion-col *ngFor="let content of CONTENT_OTHERDATA.programcontent" class="ion-no-padding" size="12" size-sm="6" size-md="6" size-lg="4"
                size-xl="3">
                <ng-container *ngIf="content.type == 'course'">
                    <core-courses-course-list-item [course]="content.course" class="core-courseoverview" showDownload="false" layout="list">
                    </core-courses-course-list-item>
                </ng-container>
                <ng-container *ngIf="content.type != 'course'">
                    <ion-label position="stacked" class="ion-no-margin">
                        <span [innerHtml]="content.padding" class="program-content-spacer"></span>
                        <b class="program-content-header">{{content.fullname}}</b>
                    </ion-label>
                    <ion-label position="stacked" class="ion-no-margin">
                        <span [innerHtml]="content.padding" class="program-content-spacer"></span>
                        <b>{{ 'plugin.block_myprograms.sequencetype' | translate }}</b>
                    </ion-label>
                    <ion-label position="stacked">
                        <span [innerHtml]="content.padding" class="program-content-spacer"></span>
                        {{ content.completiontype }}
                    </ion-label>
                </ng-container>
            </ion-col>
        </ion-row>
    </ion-grid>
</div>
